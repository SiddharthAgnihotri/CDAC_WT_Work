<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="index.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid row mt-5">
        <h1 class="col-10 text-center">Welcome to CDAC</h1>
        <p class="col-2 text-center moving-clock" id="clock"></p>
        <h4 class="col-10 text-end">Items in Cart: <span id="total-item-count">0</span></h4>
        <table class="table table-bordered mt-4 text-center">
            <thead>
                <tr>
                    <th>Images</th>
                    <th>Description</th>
                    <th>Rate</th>
                    <th>Qty</th>
                    <th>Total</th>
                    <th>Select</th>
                </tr>
            </thead>
            <tbody id="cart-items">
                <!-- Items will be populated here dynamically -->
            </tbody>
        </table>
        <h3 class="col-10 text-start">Total Cart Amount: Rs. <span id="total-cart-amount">0.00</span></h3>
        
    </div>

    <script>
        const items = [
            { image: "chips.jpg", description: "Lays Chips", rate: 300, qty: 0 },
            { image: "Buiscuits.jpg", description: "Marie Buiscuits", rate: 500, qty: 0 },
            { image: "Pepsi.jpg", description: "Pepsi Cold drink", rate: 100, qty: 0 },
            { image: "Kurkure.jpg", description: "Kurkure", rate: 125, qty: 0 },
            { image: "DairyMilk.jpg", description: "Dairy Milk Choclate", rate: 400, qty: 0 }
        ];

        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString();
            document.getElementById("clock").innerText = "Time: " + time;
        }

        function renderCart() {
            const cartItemsContainer = document.getElementById("cart-items");
            let totalAmount = 0;

            cartItemsContainer.innerHTML = '';

            items.forEach((item, index) => {
                const row = document.createElement("tr");

                row.innerHTML = `
                    <td><img src="${item.image}" alt="Item Image" width="100"></td>
                    <td>${item.description}</td>
                    <td>${item.rate}</td>
                    <td><input type="number" value="${item.qty}" class="form-control qty-input" data-index="${index}" min="1"></td>
                    <td><span class="item-total" data-index="${index}">${item.rate * item.qty}</span></td>
                    <td><input type="checkbox" class="select-item" data-index="${index}"></td>
                `;

                cartItemsContainer.appendChild(row);

                row.querySelector('.qty-input').addEventListener('input', (e) => {
                    const qty = parseInt(e.target.value);
                    if (qty > 0) {
                        items[index].qty = qty;
                        updateItemTotal(index);
                        updateCartTotal();
                    }
                });

                row.querySelector('.select-item').addEventListener('change', () => {
                    updateCartTotal();
                });
            });

            updateCartTotal();
        }

        function updateItemTotal(index) {
            const item = items[index];
            const itemTotalElem = document.querySelector(`.item-total[data-index="${index}"]`);
            itemTotalElem.textContent = item.rate * item.qty;
        }

        function updateCartTotal() {
            let cartTotal = 0;
            let itemCount = 0;

            items.forEach((item, index) => {
                const selectCheckbox = document.querySelector(`.select-item[data-index="${index}"]`);
                if (selectCheckbox && selectCheckbox.checked) {
                    cartTotal += item.rate * item.qty;
                    itemCount += item.qty;
                }
            });

            document.getElementById("total-cart-amount").textContent = cartTotal.toFixed(2);
            document.getElementById("total-item-count").textContent = itemCount;
        }
        setInterval(updateClock, 1000);
        renderCart();
    </script>
</body>
</html>
